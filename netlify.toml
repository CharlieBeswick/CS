[build]
  publish = "public"
  command = "npm run build"
  ignore = "node_modules/**"

[build.environment]
  NODE_VERSION = "18"
  # Skip Prisma generation for Netlify (frontend only)
  SKIP_PRISMA = "true"

# Redirect admin panel to Railway backend
[[redirects]]
  from = "/admin"
  to = "https://perpetual-reprieve-try3.up.railway.app/admin"
  status = 200
  force = true

# Redirects for SPA routing (must come after specific routes)
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200

# Note: This configuration deploys only the static frontend.
# The backend (server.js) requires a separate Node.js hosting solution
# such as Railway, Render, Heroku, or Netlify Functions.
# Update API_BASE in public/app.js to point to your backend URL.

